<!DOCTYPE html>
<html>
<head>
    <title>ROS Connection Test</title>
    <script src="https://cdn.jsdelivr.net/npm/roslib@1.3.0/build/roslib.min.js"></script>
</head>
<body>
    <h1>ROS Connection Test</h1>
    <div id="status">Connecting...</div>
    <div id="topics"></div>
    
    <script>
        const ros = new ROSLIB.Ros({
            url: 'ws://localhost:9090'
        });
        
        ros.on('connection', () => {
            document.getElementById('status').innerHTML = '<span style="color: green;">✅ Connected to ROS!</span>';
            console.log('Connected!');
            
            // Try to get topics
            const topicsService = new ROSLIB.Service({
                ros: ros,
                name: '/rosapi/topics',
                serviceType: 'rosapi/Topics'
            });
            
            const request = new ROSLIB.ServiceRequest({});
            topicsService.callService(request, (result) => {
                if (result && result.topics) {
                    document.getElementById('topics').innerHTML = 
                        '<h3>Available Topics (' + result.topics.length + '):</h3>' +
                        '<pre>' + result.topics.join('\n') + '</pre>';
                }
            });
        });
        
        ros.on('error', (error) => {
            document.getElementById('status').innerHTML = 
                '<span style="color: red;">❌ Error: ' + error + '</span>';
            console.error('Error:', error);
        });
        
        ros.on('close', () => {
            document.getElementById('status').innerHTML = 
                '<span style="color: orange;">⚠️ Connection closed</span>';
            console.log('Closed');
        });
    </script>
</body>
</html>

